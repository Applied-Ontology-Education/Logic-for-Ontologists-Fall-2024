#checks whether subclasses of process boundary are connected to a zero-dimensional temporal region
#lev 4


PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX obo: <http://purl.obolibrary.org/obo/>

SELECT ?entity ?warningMessage
WHERE {
    # Find all classes or subclasses of BFO_0000035
    ?entity rdfs:subClassOf+ obo:BFO_0000035 .

    # Check if they do NOT have the axiom connecting them through "occupies temporal region" to a subclass of zero-dimensional temporal region
    FILTER NOT EXISTS {
        ?entity rdfs:subClassOf [
            rdf:type owl:Restriction ;
            owl:onProperty obo:BFO_0000199 ;
            owl:someValuesFrom ?targetClass
        ] .

        # Ensure the target class is a subclass of zero-dimensional temporal region
        ?targetClass rdfs:subClassOf* obo:BFO_0000148 .
    }

    # Create a warning message
    OPTIONAL {
        ?entity rdfs:label ?label .
    }
    BIND(CONCAT("Warning: Class ", STR(COALESCE(?label, ?entity)), " is a process boundary but doesn't have occupy a zero-dimensional temporal region.") AS ?warningMessage)
}
